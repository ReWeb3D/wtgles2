WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WGLWidget",function(o,f){jQuery.data(f,"obj",this);var d=this;this._mouseEventNode=this._mouseWheelEventNode=this._canvas=f;this._keyboardEventNode=document;this.ctx=null;this.initializeGL=function(){};this.paintGL=function(){};this.resizeGL=function(){};this.updates=[];this.preloadingTextures=this.initialized=false;d.cameraMatrix=null;this.setManipulator=function(c){this.manipulator=c};this.getManipulator=function(){return this.manipulator};this.discoverContext=
function(c){if(f.getContext){try{this.ctx=f.getContext("webgl",{antialias:true})}catch(g){}if(this.ctx==null)try{this.ctx=f.getContext("experimental-webgl")}catch(b){}if(this.ctx==null){f.parentNode.insertBefore(f.firstChild,f);f.style.display="none";c()}}return this.ctx};this.setLookToFromUpParams=function(c,g,b,j){this.setupManipulator();this.getManipulator().setLookFromToUp(g,b,j);d.cameraMatrix=c;d.timeTick()};d.timeTick=function(){if(!window.requestAnimationFrame)window.requestAnimationFrame=
function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(c){window.setTimeout(c,1E3/60)}}();d.getManipulator().update((new Date).getTime());d.cameraMatrix=d.getManipulator().getInverseMatrix();d.ctx.WtMatrix0=d.cameraMatrix;d.paintGL();window.requestAnimationFrame(d.timeTick)};this.mouseUp=function(){};this.mouseDown=function(){};this.mouseDragLookAt=function(){};this.mouseWheelLookAt=function(){};
this.setupManipulator=function(c,g){if(c===undefined)c=new osgGA.OrbitManipulator;this.setManipulator(c);var b=this;if(g===undefined||g===false){this._canvas.addEventListener("touchstart",function(a){return b.getManipulator().touchstart(a)},false);this._canvas.addEventListener("touchend",function(a){return b.getManipulator().touchend(a)},false);this._canvas.addEventListener("touchmove",function(a){return b.getManipulator().touchmove(a)},false);this._canvas.addEventListener("touchcancel",function(a){return b.getManipulator().touchcancel(a)},
false);this._canvas.addEventListener("touchleave",function(a){return b.getManipulator().touchleave(a)},false);this._canvas.addEventListener("gesturestart",function(a){return b.getManipulator().gesturestart(a)},false);this._canvas.addEventListener("gesturechange",function(a){return b.getManipulator().gesturechange(a)},false);this._canvas.addEventListener("gestureend",function(a){return b.getManipulator().gestureend(a)},false);c=function(a){return b.getManipulator().mousedown(a)};g=function(a){return b.getManipulator().mouseup(a)};
var j=function(a){return b.getManipulator().mousemove(a)},n=function(a){return b.getManipulator().dblclick(a)},m=function(a){var e=a||window.event,l=[].slice.call(arguments,1),h=0,k=0,i=0;a.type="mousewheel";if(a.wheelDelta)h=a.wheelDelta/120;if(a.detail)h=-a.detail/3;i=h;if(e.axis!==undefined&&e.axis===e.HORIZONTAL_AXIS){i=0;k=-1*h}if(e.wheelDeltaY!==undefined)i=e.wheelDeltaY/120;if(e.wheelDeltaX!==undefined)k=-1*e.wheelDeltaX/120;l.unshift(a,h,k,i);e=b.getManipulator();return e.mousewheel.apply(e,
l)};b.getManipulator().mousedown&&this._mouseEventNode.addEventListener("mousedown",c,false);b.getManipulator().mouseup&&this._mouseEventNode.addEventListener("mouseup",g,false);b.getManipulator().mousemove&&this._mouseEventNode.addEventListener("mousemove",j,false);b.getManipulator().dblclick&&this._mouseEventNode.addEventListener("dblclick",n,false);if(b.getManipulator().mousewheel){this._mouseWheelEventNode.addEventListener("DOMMouseScroll",m,false);this._mouseWheelEventNode.addEventListener("mousewheel",
m,false)}c=function(a){return b.getManipulator().keydown(a)};g=function(a){return b.getManipulator().keyup(a)};b.getManipulator().keydown&&this._keyboardEventNode.addEventListener("keydown",c,false);b.getManipulator().keyup&&this._keyboardEventNode.addEventListener("keyup",g,false)}}});
